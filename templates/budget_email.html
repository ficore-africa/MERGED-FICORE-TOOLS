<!DOCTYPE html>
<html lang="{{ language if language in ['en', 'ha'] else 'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ trans.get('Your Budget Report', 'Your Budget Report') }}</title>
    <!-- Include Font Awesome for social media icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body { font-family: 'Poppins', Arial, sans-serif; background: #F5F7FA; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 600px; margin: 0 auto; background: #FFFFFF; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.1); }
        .header { background: linear-gradient(135deg, #2E7D32, #0288D1); padding: 20px; border-radius: 10px 10px 0 0; text-align: center; }
        .header h2 { color: #FFFFFF; margin: 0; font-size: 24px; }
        .header p { font-style: italic; color: #E0F7FA; font-size: 14px; margin: 5px 0 0 0; }
        .content { padding: 20px; }
        .summary-box { border: 2px solid #2E7D32; background: #E8F5E9; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .badges-box { border: 2px solid #FBC02D; background: #FFFDE7; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .tips-box { border: 2px solid #0288D1; background: #E3F2FD; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .chart-box { border: 2px solid #0288D1; background: #E3F2FD; border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: left; }
        .section-header { color: #2E7D32; font-weight: 600; font-size: 18px; margin-bottom: 15px; }
        .deficit { color: #D32F2F; font-weight: 600; }
        .button { display: inline-block; padding: 12px 32px; background: linear-gradient(135deg, #2E7D32, #0288D1); color: #FFFFFF; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; margin: 10px 0; }
        .button:hover { background: linear-gradient(135deg, #1B5E20, #01579B); color: #FFFFFF; }
        .footer { text-align: center; padding: 20px; background: #f8f9fa; border-radius: 0 0 12px 12px; }
        .footer p { color: #0288D1; font-size: 14px; margin: 0; }
        .footer-links a { color: #2E7D32; margin: 0 10px; font-size: 14px; text-decoration: none; }
        .footer-links a:hover { text-decoration: underline; }
        .social-icons a { color: #0288D1; margin: 0 8px; font-size: 18px; text-decoration: none; }
        .social-icons a:hover { color: #2E7D32; }
        ul { list-style: none; padding: 0; }
        li { margin-bottom: 10px; font-size: 16px; }
        li strong { color: #0288D1; }
        .chart-text { font-size: 14px; }
        .chart-text li { display: flex; justify-content: space-between; }
        @media only screen and (max-width: 600px) {
            body { padding: 10px; }
            .container { max-width: 100%; }
            .content { padding: 15px; }
            .summary-box, .badges-box, .tips-box, .chart-box { padding: 15px; }
            .button { padding: 10px 20px; font-size: 14px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>{{ trans.get('Your Budget Report', 'Your Budget Report') }}</h2>
            <p>{{ trans.get('Financial growth passport for Africa', 'Financial growth passport for Africa') }}</p>
        </div>
        <div class="content">
            <p>{{ trans.get('Dear', 'Dear') }} {{ user_name | default('User') }},</p>
            <p>{{ trans.get('Here is your monthly budget summary.', 'Here is your monthly budget summary.') }}</p>
            <div class="summary-box" role="region" aria-labelledby="summary-header">
                <h3 id="summary-header" class="section-header">{{ trans.get('Summary with Emoji', 'Summary üìä') }}</h3>
                <ul>
                    <li><strong>{{ trans.get('Monthly Income', 'Monthly Income') }}:</strong> {{ monthly_income | default(0) | format_currency('NGN') }}</li>
                    <li><strong>{{ trans.get('Housing', 'Housing') }}:</strong> {{ housing_expenses | default(0) | format_currency('NGN') }}</li>
                    <li><strong>{{ trans.get('Food', 'Food') }}:</strong> {{ food_expenses | default(0) | format_currency('NGN') }}</li>
                    <li><strong>{{ trans.get('Transport', 'Transport') }}:</strong> {{ transport_expenses | default(0) | format_currency('NGN') }}</li>
                    <li><strong>{{ trans.get('Other', 'Other') }}:</strong> {{ other_expenses | default(0) | format_currency('NGN') }}</li>
                    <li><strong>{{ trans.get('Total Expenses', 'Total Expenses') }}:</strong> {{ total_expenses | default(0) | format_currency('NGN') }}</li>
                    <li><strong>{{ trans.get('Savings', 'Savings') }}:</strong> {{ savings | default(0) | format_currency('NGN') }}</li>
                    <li><strong>{{ trans.get('Surplus/Deficit', 'Surplus/Deficit') }}:</strong> 
                        <span {% if surplus_deficit | default(0) < 0 %}class="deficit"{% endif %}>
                            {{ surplus_deficit | default(0) | format_currency('NGN') }}
                        </span>
                    </li>
                </ul>
            </div>
            <div class="chart-box" role="region" aria-labelledby="chart-header">
                <h3 id="chart-header" class="section-header">{{ trans.get('Budget Breakdown', 'Budget Breakdown') }}</h3>
                {% if chart_data and chart_data.labels and chart_data.values %}
                    <ul class="chart-text">
                        {% for label, value in chart_data.labels | zip(chart_data.values) %}
                            <li>
                                <span>{{ trans.get(label, label) }}</span>
                                <span>{{ value | default(0) | format_currency('NGN') }}</span>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>{{ trans.get('Chart Unavailable', 'Chart unavailable at this time.') }}</p>
                {% endif %}
            </div>
            <div class="badges-box" role="region" aria-labelledby="badges-header">
                <h3 id="badges-header" class="section-header">{{ trans.get('Badges with Emoji', 'Badges üèÖ') }}</h3>
                {% if badges %}
                    <ul>
                        {% for badge in badges %}
                            <li aria-label="{{ trans.get(badge, badge) }}">{{ trans.get(badge, badge) }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>{{ trans.get('No Badges Yet', 'No Badges Yet') }}</p>
                {% endif %}
            </div>
            <div class="tips-box" role="region" aria-labelledby="tips-header">
                <h3 id="tips-header" class="section-header">{{ trans.get('Tips with Emoji', 'Tips üí°') }}</h3>
                {% if advice %}
                    <ul>
                        {% for tip in advice %}
                            <li aria-describedby="tip-{{ loop.index }}">{{ trans.get(tip, tip) }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>{{ trans.get('No tips available.', 'No tips available.') }}</p>
                {% endif %}
            </div>
            <div style="text-align: center;">
                <a href="{{ course_url | default('https://example.com/course') }}" class="button" role="button" aria-label="{{ trans.get('Join Financial Course', 'Join Financial Course') }}">
                    {{ trans.get('Join Course', 'Join Course') }}
                </a>
            </div>
            <p>{{ trans.get('Thank you for choosing Ficore Africa!', 'Thank you for choosing Ficore Africa!') }}</p>
        </div>
        <div class="footer">
            <p>{{ trans.get('About Ficore Africa: Empowering financial growth across Africa since 2023', 'About Ficore Africa: Empowering financial growth across Africa since 2023') }}</p>
            <div class="footer-links">
                <a href="{{ FEEDBACK_FORM_URL | default('https://forms.gle/1g1FVulyf7ZvvXr7G0q7hAKwbGJMxV4blpjBuqrSjKzQ') }}" aria-label="{{ trans.get('Provide Feedback', 'Provide Feedback') }}">{{ trans.get('Feedback', 'Feedback') }}</a>
                <a href="{{ WAITLIST_FORM_URL | default('https://forms.gle/17e0XYcp-z3hCl0I-j2JkHoKKJrp4PfgujsK8D7uqNxo') }}" aria-label="{{ trans.get('Join Waitlist', 'Join Waitlist') }}">{{ trans.get('Join Waitlist', 'Join Waitlist') }}</a>
                <a href="{{ CONSULTANCY_FORM_URL | default('https://forms.gle/1TKvlT7OTvNS70YNd8DaPpswvqd9y7hKydxKr07gpK9A') }}" aria-label="{{ trans.get('Book Consultancy', 'Book Consultancy') }}">{{ trans.get('Consultancy', 'Consultancy') }}</a>
            </div>
            <div class="social-icons">
                <a href="{{ linkedin_url | default('https://www.linkedin.com/in/ficore-africa-58913a363/') }}" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="{{ twitter_url | default('https://x.com/Hassanahm4d') }}" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
    </div>
</body>
</html>

<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="{{ language if language in ['en', 'ha'] else 'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ trans.get('Your Financial Personality Revealed', 'Your Financial Personality Revealed') }}">
    <meta name="keywords" content="ficore africa, financial quiz, Africa SME finance">
    <meta name="author" content="Ficore Africa">
    <title>{{ trans.get('Quiz Results', 'Quiz Results') }} - Ficore Africa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    <div class="container">
        <header class="my-4">
            <img src="{{ url_for('static', filename='img/ficore_logo.png') }}" alt="Ficore Africa Logo" class="img-fluid">
            <h1>{{ trans.get('Quiz Results', 'Quiz Results') }}</h1>
            <p>{{ trans.get('Your Financial Personality Revealed', 'Your Financial Personality Revealed') }}</p>
        </header>

        <div class="content-container">
            <h2><i class="fas fa-user me-2"></i>{{ trans.get('Hello', 'Hello') }}, {{ results.first_name or trans.get('User', 'User') }}!</h2>
            <h3 style="color: #F4C430;"><i class="fas fa-star me-2"></i>{{ trans.get('Your financial personality is', 'Your financial personality is') }}: {{ results.personality }}</h3>
            <p>{{ results.personality_desc }}</p>
            <p><strong><i class="fas fa-lightbulb me-2"></i>{{ trans.get('Tip', 'Tip') }}:</strong> {{ results.tip }}</p>
            <div class="section-divider"></div>
            <h4><i class="fas fa-award me-2"></i>{{ trans.get('Your Badges', 'Your Badges') }}</h4>
            {% if results.badges %}
                {% for badge in results.badges %}
                    <span class="badge bg-primary me-2">{{ badge }}</span>
                {% endfor %}
            {% else %}
                <p>{{ trans.get('No badges earned yet. Keep exploring!', 'No badges earned yet. Keep exploring!') }}</p>
            {% endif %}
            <div class="section-divider"></div>
            <h4><i class="fas fa-list-check me-2"></i>{{ trans.get('Your Answers', 'Your Answers') }}</h4>
            <ul>
                {% for question, answer in results.answers %}
                    <li>{{ trans.get(question, question) }}: {{ trans.get(answer, answer) }}</li>
                {% endfor %}
            </ul>
            {% if results.summary_chart %}
                <div class="section-divider"></div>
                <h4><i class="fas fa-chart-bar me-2"></i>{{ trans.get('Quiz Summary', 'Quiz Summary') }}</h4>
                <div class="chart-container">
                    {{ results.summary_chart|safe }}
                </div>
            {% else %}
                <p>{{ trans.get('No summary chart available.', 'No summary chart available.') }}</p>
            {% endif %}
            <div class="d-flex gap-2 mt-3 justify-content-center">
                <a href="{{ url_for('quiz_step1') }}" class="btn btn-primary"><i class="fas fa-redo me-1"></i>{{ trans.get('Take Quiz Again', 'Take Quiz Again') }}</a>
                <a href="{{ url_for('index') }}" class="btn btn-secondary"><i class="fas fa-home me-1"></i>{{ trans.get('Back to Home', 'Back to Home') }}</a>
            </div>
        </div>

        <footer class="footer mt-4">
            <p>{{ trans.get('About Ficore Africa', 'About Ficore Africa') }}: {{ trans.get('Empowering financial growth across Africa since 2023', 'Empowering financial growth across Africa since 2023') }}</p>
            <div class="social-icons">
                <a href="{{ LINKEDIN_URL }}" target="_blank" aria-label="{{ trans.get('Follow on LinkedIn', 'Follow on LinkedIn') }}"><i class="fab fa-linkedin"></i></a>
                <a href="{{ TWITTER_URL }}" target="_blank" aria-label="{{ trans.get('Follow on Twitter', 'Follow on Twitter') }}"><i class="fab fa-twitter"></i></a>
                <a href="{{ FACEBOOK_URL }}" target="_blank" aria-label="{{ trans.get('Follow on Facebook', 'Follow on Facebook') }}"><i class="fab fa-facebook"></i></a>
            </div>
            <p>
                <a href="/cdn-cgi/l/email-protection#31525451514e5355314748424e53444047534842400f424e4c">{{ trans.get('Click to Email for support', 'Click to Email for support') }}</a> |
                <a href="{{ FEEDBACK_FORM_URL }}" target="_blank">{{ trans.get('Provide Feedback', 'Provide Feedback') }}</a> |
                <a href="{{ url_for('logout') }}">{{ trans.get('Logout', 'Logout') }}</a>
            </p>
        </footer>
    </div>
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>